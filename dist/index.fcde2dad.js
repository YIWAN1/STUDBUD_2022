function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};class n{_val={};_me=null;constructor(e){this._me=e}set(e){if(e){for(var t in e)this._val[t]=e[t];this._me&&this._me.viewDataChanged&&this._me.viewDataChanged()}}get(){return this._val}clear(){this._val={},this._me&&this._me.viewDataChanged&&this._me.viewDataChanged()}}var o=1;const i=e=>window.observeObjects[e]?window.observeObjects[e]:{};var r={};!function(){var e=function(){var t=[].slice.call(arguments);return t.push(e.options),t[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&t[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,(function(e,n){var o=document,i=o&&o.getElementById(n);t[0]=i?i.value||i.innerHTML:e})),e.documentHTML&&(e.compile.call(e,e.documentHTML),e.documentHTML=""),1==arguments.length?e.compile.apply(e,t):arguments.length>=2?e.to_html.apply(e,t):void 0},n={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return n.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"']/gim,this.escapereplace)},detection:function(e){return void 0===e?"":e}},o=function(e){if("undefined"!=typeof console){if(console.warn)return void console.warn(e);if(console.log)return void console.log(e)}throw e},i=function(e,t){if((e=e!==Object(e)?{}:e).__proto__)return e.__proto__=t,e;var n=function(){},o=Object.create?Object.create(t):new(n.prototype=t,n);for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);return o};e.__cache={},e.version="0.6.15",e.settings={},e.documentHTML="",e.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},e.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:i({__escapehtml:n,__throw:o,__juicer:e},{})},e.tagInit=function(){var t=e.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+e.tags.operationClose,n=e.tags.operationOpen+"\\/each"+e.tags.operationClose,o=e.tags.operationOpen+"if\\s*([^}]*?)"+e.tags.operationClose,i=e.tags.operationOpen+"\\/if"+e.tags.operationClose,r=e.tags.operationOpen+"else"+e.tags.operationClose,s=e.tags.operationOpen+"else if\\s*([^}]*?)"+e.tags.operationClose,a=e.tags.interpolateOpen+"([\\s\\S]+?)"+e.tags.interpolateClose,c=e.tags.noneencodeOpen+"([\\s\\S]+?)"+e.tags.noneencodeClose,p=e.tags.commentOpen+"[^}]*?"+e.tags.commentClose,l=e.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+e.tags.operationClose,u=e.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+e.tags.operationClose,g=e.tags.operationOpen+"helper\\s*([^}]*?)\\s*"+e.tags.operationClose,f=e.tags.operationOpen+"\\/helper"+e.tags.operationClose;e.settings.forstart=new RegExp(t,"igm"),e.settings.forend=new RegExp(n,"igm"),e.settings.ifstart=new RegExp(o,"igm"),e.settings.ifend=new RegExp(i,"igm"),e.settings.elsestart=new RegExp(r,"igm"),e.settings.elseifstart=new RegExp(s,"igm"),e.settings.interpolate=new RegExp(a,"igm"),e.settings.noneencode=new RegExp(c,"igm"),e.settings.inlinecomment=new RegExp(p,"igm"),e.settings.rangestart=new RegExp(l,"igm"),e.settings.include=new RegExp(u,"igm"),e.settings.helperRegister=new RegExp(g+"([\\s\\S]*?)"+f,"igm")},e.tagInit(),e.set=function(e,t){var n=this,o=function(e){return e.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,(function(e){return"\\"+e}))},i=function(e,t){var i=e.match(/^tag::(.*)$/i);if(i)return n.tags[i[1]]=o(t),void n.tagInit();n.options[e]=t};if(2!==arguments.length){if(e===Object(e))for(var r in e)e.hasOwnProperty(r)&&i(r,e[r])}else i(e,t)},e.register=function(e,t){var n=this.options._method;return!n.hasOwnProperty(e)&&(n[e]=t)},e.unregister=function(e){var t=this.options._method;if(t.hasOwnProperty(e))return delete t[e]},e.template=function(n){var o=this;this.options=n,this.__interpolate=function(e,t,n){var o,i=e.split("|"),r=i[0]||"";return i.length>1&&(e=i.shift(),r="_method."+(o=i.shift().split(",")).shift()+".call(this, "+[e].concat(o)+")"),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(n&&!1===n.detection?"":"_method.__escapehtml.detection")+"("+r+")) %>"},this.__removeShell=function(t,n){var i=0;return t=t.replace(e.settings.helperRegister,(function(t,n,o){var i=function(e){var t,n,o,i=/,/,r=/^\s*(_?)(\S+?)\1\s*$/,s=[];"function"==typeof e?e.length&&(t=e.toString()):"string"==typeof e&&(t=e),o=(t=t.trim()).match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m),n=t.match(/^function[^{]+{([\s\S]*)}/m)[1].trim();for(var a=0;a<o[1].split(i).length;a++)o[1].split(i)[a].replace(r,(function(e,t,n){s.push(n)}));return[s,n]}(o),r=i[0],s=i[1],a=new Function(r.join(","),s);return e.register(n,a),t})).replace(e.settings.forstart,(function(e,t,n,o){n=n||"value",o=o&&o.substr(1);var r="i"+i++;return"<% ~function() {for(var "+r+" in "+t+") {if("+t+".hasOwnProperty("+r+")) {var "+n+"="+t+"["+r+"];"+(o?"var "+o+"="+r+";":"")+" %>"})).replace(e.settings.forend,"<% }}}(); %>").replace(e.settings.ifstart,(function(e,t){return"<% if("+t+") { %>"})).replace(e.settings.ifend,"<% } %>").replace(e.settings.elsestart,(function(e){return"<% } else { %>"})).replace(e.settings.elseifstart,(function(e,t){return"<% } else if("+t+") { %>"})).replace(e.settings.noneencode,(function(e,t){return o.__interpolate(t,!1,n)})).replace(e.settings.interpolate,(function(e,t){return o.__interpolate(t,!0,n)})).replace(e.settings.inlinecomment,"").replace(e.settings.rangestart,(function(e,t,n,o){var r="j"+i++;return"<% ~function() {for(var "+r+"="+n+";"+r+"<"+o+";"+r+"++) {{var "+t+"="+r+"; %>"})).replace(e.settings.include,(function(e,t,n){return t.match(/^file\:\/\//gim)?e:"<%= _method.__juicer("+t+", "+n+"); %>"})),n&&!1===n.errorhandling||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(n){var o=[],i=[],r="",s=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],a=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c=function(n,r){if(r=r.match(/\w+/gim)[0],-1===a(o,r)&&-1===a(s,r)&&-1===a(i,r)){if("undefined"!=typeof window&&"function"==typeof window[r]&&window[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return n;if(void 0!==t&&"function"==typeof t[r]&&t[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return n;if("function"==typeof e.options._method[r]||e.options._method.hasOwnProperty(r))return i.push(r),n;if(r.match(/^\d+/gim))return n;o.push(r)}return n};n.replace(e.settings.forstart,c).replace(e.settings.interpolate,c).replace(e.settings.ifstart,c).replace(e.settings.elseifstart,c).replace(e.settings.include,c).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_0-9]+)/gim,c);for(var p=0;p<o.length;p++)r+="var "+o[p]+"=_."+o[p]+";";for(p=0;p<i.length;p++)r+="var "+i[p]+"=_method."+i[p]+";";return"<% "+r+" %>"},this.__convert=function(e,t){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=!1!==t?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,t){var n=this;return t&&!1===t.loose||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,t),e=this.__toNative(e,t),this._render=new Function("_, _method",e),this.render=function(e,t){return t&&t===o.options._method||(t=i(t,o.options._method)),n._render.call(this,e,t)},this}},e.compile=function(e,t){t&&t===this.options||(t=i(t,this.options));var n=this,r=function(e){return t.cachestore?t.cachestore.get(e):n.__cache[e]},s=function(e,o){return t.cachestore?t.cachestore.set(e,o):n.__cache[e]=o};try{var a=r(e)?r(e):new this.template(this.options).parse(e,t);return t&&!1===t.cache||s(e,a),a}catch(e){return o("Juicer Compile Exception: "+e.message),{render:function(){}}}},e.to_html=function(e,t,n){return n&&n===this.options||(n=i(n,this.options)),this.compile(e,n).render(t,n._method)},void 0!==t&&"undefined"==typeof window&&e.set("cache",!1),"undefined"!=typeof document&&document.body&&(e.documentHTML=document.body.innerHTML),"undefined"!=typeof module&&r?r=e:this.juicer=e}();class s{data={};containerId="";constructor(e){var t;this.data=new n(this),this.containerId=e,(t=this)&&(t.__objectId=o++,window.observeObjects[t.__objectId]=t)}init(){this.data.set({msg:"123123123123",id:"856"}),console.log("footer init")}viewDataChanged(){this.containerId&&((e,t,n,o)=>{if(!e||!e.__objectId)return;const i=n.render(o);console.log(n,o,i);const r=i.replace(/this\./gi,"window.observeRun("+e.__objectId+")."),s=document.getElementById(t);s&&(s.innerHTML=r)})(this,this.containerId,"",this.data.get())}printInfo(e){console.log("v",e)}}e(r).set({"tag::operationOpen":"{@","tag::operationClose":"}","tag::interpolateOpen":"${","tag::interpolateClose":"}","tag::noneencodeOpen":"$${","tag::noneencodeClose":"}","tag::commentOpen":"{#","tag::commentClose":"}"}),window.observeObjects=[],window.observeRun=i,document.getElementById("app").innerHTML="".render({}),new s("footer").init();
//# sourceMappingURL=index.fcde2dad.js.map
